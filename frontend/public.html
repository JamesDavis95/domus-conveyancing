<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Domus â€“ Public Passport</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>
    body{font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;margin:2rem;line-height:1.45;background:#fcfcfd}
    .card{border:1px solid #e5e7eb;border-radius:12px;padding:1rem;margin:1rem 0;background:#fff}
    input{padding:.45rem .6rem;border:1px solid #ddd;border-radius:10px;min-width:240px}
    .btn{padding:.5rem .8rem;border:1px solid #ddd;border-radius:10px;background:#fff;cursor:pointer}
    pre{background:#fafafa;border:1px solid #eee;border-radius:8px;padding:.75rem;overflow:auto;max-height:60vh}
  </style>
</head>
<body>
  <h1>Public Search Passport</h1>
  <div class="card">
    <label>Matter ID <input id="mid" placeholder="123"/></label>
    <label>Token <input id="token" placeholder="t=..."/></label>
    <button class="btn" id="load">Load</button>
  </div>
  <div class="card"><pre id="out">No data.</pre></div>

<script>
function q(k){return new URLSearchParams(location.search).get(k)}
const mid = q('mid'); const t = q('t');
if(mid){ document.getElementById('mid').value = mid; }
if(t){ document.getElementById('token').value = t; }

async function load(){
  const m = document.getElementById('mid').value.trim();
  const tok = document.getElementById('token').value.trim();
  if(!m||!tok){ return; }
  const r = await fetch(`/public/passport/${m}?t=${encodeURIComponent(tok)}`);
  const text = await r.text();
  try{ document.getElementById('out').textContent = JSON.stringify(JSON.parse(text), null, 2); }
  catch{ document.getElementById('out').textContent = text; }
}
document.getElementById('load').addEventListener('click', load);
if(mid && t){ load(); }
</script>
</body>
</html>
